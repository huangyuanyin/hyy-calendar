{"remainingRequest":"C:\\Users\\huangyuanyin\\AppData\\Roaming\\npm\\node_modules\\@vue\\cli-service-global\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\demo\\小demo\\日历组件\\date-picker.vue?vue&type=style&index=0&lang=css&","dependencies":[{"path":"E:\\demo\\小demo\\日历组件\\date-picker.vue","mtime":1614931106570},{"path":"C:\\Users\\huangyuanyin\\AppData\\Roaming\\npm\\node_modules\\@vue\\cli-service-global\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\huangyuanyin\\AppData\\Roaming\\npm\\node_modules\\@vue\\cli-service-global\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"C:\\Users\\huangyuanyin\\AppData\\Roaming\\npm\\node_modules\\@vue\\cli-service-global\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"C:\\Users\\huangyuanyin\\AppData\\Roaming\\npm\\node_modules\\@vue\\cli-service-global\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\huangyuanyin\\AppData\\Roaming\\npm\\node_modules\\@vue\\cli-service-global\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi5wYW5uZWx7CiAgICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgICBiYWNrZ3JvdW5kOiAjZmZmOwogICAgd2lkdGg6IDYwKjdweDsKICAgIGJveC1zaGFkb3c6IDJweCAycHggMnB4IHBpbmssLTJweCAtMnB4IDJweCBwaW5rOwogICAgCn0KLnBhbm5lbC1uYXZ7CiAgICBoZWlnaHQ6IDYwcHg7CiAgICBkaXNwbGF5OiBmbGV4OwogICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1hcm91bmQ7Cn0KLnBhbm5lbC1uYXYgc3BhbnsKICAgIGRpc3BsYXk6IGlubGluZS1mbGV4OwogICAgY3Vyc29yOiBwb2ludGVyOwogICAgdXNlci1zZWxlY3Q6IG5vbmU7CgogICAgbWFyZ2luLWxlZnQ6IDBweDsKICAgIGp1c3RpZnktY29udGVudDogY2VudGVyOwogICAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICAgIAp9Ci5wYW5uZWwtbmF2IHNwYW46aG92ZXJ7CiAgICBib3JkZXI6IDAuNXB4IHNvbGlkIGJsdWU7CiAgICBib3JkZXItcmFkaXVzOiAyMCU7CiAgICAKfQoucGFubmVsLWNvbnRlbnQgLmNlbGx7CiAgICB3aWR0aDogNjRweDsKICAgIGhlaWdodDogNjRweDsKICAgIGRpc3BsYXk6IGlubGluZS1mbGV4OwogICAgLyogYWxpZ24tY29udGVudDogY2VudGVyOyAqLwogICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7CiAgICAgICBhbGlnbi1pdGVtczogY2VudGVyOwogICAgZm9udC13ZWlnaHQ6IGJvbGQ7CiAgICAgICAgYm9yZGVyOiAxcHggc29saWQgd2hpdGU7CiAgICAgICAgYm9yZGVyLXJhZGl1czogMTBweDsKCn0KLnBhbm5lbC1jb250ZW50IC5jZWxsLWRheXM6aG92ZXIsLnNlbGVjdHsKICAgIGJvcmRlcjogMXB4IHNvbGlkIHBpbms7CiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsKICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgICBib3JkZXItcmFkaXVzOiAxMHB4Owp9Ci5wYW5uZWwtZm9vdGVyIC5pbWd7CiAgICBoZWlnaHQ6IDYwcHg7Cn0KLm5vdEN1cnJlbnRNb250aHsKICAgIGNvbG9yOiBncmF5Owp9Ci50b2RheXsKICAgIGJhY2tncm91bmQ6IHJlZDsKICAgIGNvbG9yOiAjZmZmOwogICAgYm9yZGVyLXJhZGl1czogMTBweDsKfQoK"},{"version":3,"sources":["date-picker.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+KA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"date-picker.vue","sourceRoot":".","sourcesContent":["<template>\r\n    <div v-click-outside >\r\n        <input type=\"text\" :value=\"formaDate\"  >\r\n        <di v-if=\"isVisible\" class=\"pannel\">\r\n            <div class=\"pannel-nav\">\r\n                <span @click=\"preYear\">&lt;</span>\r\n                <span @click=\"preMonth\">&lt;&lt;</span>\r\n                <span>{{time.year}}年</span>\r\n                <span>{{time.month}}月</span>\r\n                <span @click=\"nextMonth\">&gt;&gt;</span>\r\n                <span @click=\"nextYear\">&gt;</span>\r\n            </div>\r\n            <div class=\"pannel-content\">\r\n                <div class=\"days\">\r\n                     <span \r\n                            v-for=\"j in 7\" :key=\"`_`+j\"\r\n                            class=\"cell\"\r\n                    >\r\n                        {{weekDays[j-1]}}\r\n                        </span>\r\n                    <div v-for=\"i in 6\" :key=\"i\">  \r\n                        <span \r\n                            v-for=\"j in 7\" :key=\"j\"\r\n                            class=\"cell cell-days\"\r\n                            @click=\"chooseDate(visibeDays()[(i-1)*7+(j-1)])\"\r\n                            :class=\"[\r\n                                {notCurrentMonth:!isCurrentMonth(visibeDays()[(i-1)*7+(j-1)])},\r\n                                {today:isToday(visibeDays()[(i-1)*7+(j-1)])},\r\n                                {select:isSelect(visibeDays()[(i-1)*7+(j-1)])}\r\n                            ]\"\r\n                        >\r\n                            {{visibeDays()[(i-1)*7+(j-1)].getDate()}}\r\n                        </span>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class=\"pannel-footer\">\r\n                <img src=\"./img/1.jpg\" width=\"100%\" height=\"200px\">\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport * as utils from './utils.js'\r\nexport default {\r\n    directives:{\r\n        clickOutside:{    //指令的生命周期  用自定义指令，为了操作dom\r\n            bind(el,bindings,vnode){\r\n                let hander = (e) =>{\r\n                    if(el.contains(e.target)){\r\n                    //判断一下是否当前面板已经显示出来了\r\n                        if (!vnode.context.isVisible) {\r\n                        vnode.context.focus();\r\n                        console.log('包含')\r\n                        }\r\n                    }else{\r\n                        if (vnode.context.isVisible) {\r\n                        vnode.context.blur();\r\n                        console.log('不包含')\r\n                        }\r\n                     }\r\n                }\r\n                el.hander = hander;\r\n                //把事件 绑定到document上，看一下点击的是否是当前这个元素的内部\r\n                document.addEventListener('click',hander)\r\n            },\r\n            unbind(el){\r\n                document.removeEventListener('click',el.hander)\r\n            }\r\n        }\r\n    },\r\n    data(){\r\n        let {year,month} = utils.getYearMonthDay(this.value);  //拿到当前传过来的年和月\r\n        return{\r\n            isVisible:false,\r\n            weekDays:['日','一','二','三','四','五','六'],\r\n            time:{year,month}\r\n        }\r\n    },\r\n    props:{\r\n        value:{\r\n            type:Date,\r\n            defalut:() => new Date()  //返回的默认值必须是一个函数类型\r\n        }\r\n    },\r\n    methods:{\r\n        focus(){\r\n            this.isVisible = true;\r\n        },\r\n        blur(){\r\n            this.isVisible = false;\r\n        }, \r\n        visibeDays(){\r\n            //获取当前的年月日\r\n            // let {year,month} = utils.getYearMonthDay(this.value);\r\n            let {year,month} = utils.getYearMonthDay(utils.getDate(this.time.year,this.time.month,1));\r\n            //获取当前月份的第一天\r\n            let currentFirstDay = utils.getDate(year,month,1);  \r\n            //获取第一天是周几\r\n            let week = currentFirstDay.getDay();\r\n            //用当月的第一天减去 周几前面的几天，这样就能得到上个月开始的天数\r\n            let startDay = currentFirstDay - week * 60 * 60 * 24 * 1000\r\n            console.log(week);\r\n            //利用数组并循环遍历获取到所有的日期\r\n            let arr = [];\r\n            for (let i = 0; i < 42 ; i++) {\r\n                arr.push(new Date(startDay + i *60 * 60 * 24 *1000));\r\n            }\r\n            return arr;\r\n        },\r\n        //判断是否是当前月的方法，传入每一天 用传入的每一天去和当前年月做比较然后返回\r\n        isCurrentMonth(date){\r\n            let {year,month} = utils.getYearMonthDay(utils.getDate(this.time.year,this.time.month,1));\r\n            let {year:y,month:m} = utils.getYearMonthDay(date);\r\n            return year === y && month === m;\r\n        },\r\n        //判断是否是当前天的方法 同理\r\n        isToday(date){\r\n            let {year,month,day} = utils.getYearMonthDay(this.value);\r\n            let {year:y,month:m,day:d} = utils.getYearMonthDay(date);\r\n            return year === y & month === m & day === d;\r\n        },\r\n        chooseDate(date){\r\n            this.time = utils.getYearMonthDay(date); //因为拿到的日期在data中，只有在其加载的时候才会渲染一次。所以在选中日期的时候，不仅要把年和月赋值出去，还要更新一下。\r\n            //将获得的日期返回到input\r\n            //子组件可以使用 $emit 触发父组件的自定义事件。\r\n            this.$emit('input',date);\r\n            this.blur();\r\n        },\r\n        isSelect(date){\r\n            //获取当前的年月日\r\n            let {year,month,day} = utils.getYearMonthDay(this.value);\r\n            let {year:y,month:m,day:d} = utils.getYearMonthDay(date);\r\n            return year === y & month === m & day === d;\r\n        },\r\n        //上一个月 获取当年月 用setMonth()去设置月份，然后更新月份\r\n        preMonth(){\r\n            //获取当前的年月日\r\n            let d = utils.getDate(this.time.year,this.time.month,1);\r\n            //更改月份\r\n            d.setMonth(d.getMonth()-1);\r\n            //拿到更改的月份然后赋值给time\r\n            this.time = utils.getYearMonthDay(d);\r\n        },\r\n        nextMonth(){\r\n            let d = utils.getDate(this.time.year,this.time.month,1);\r\n            d.setMonth(d.getMonth()+1);\r\n            this.time = utils.getYearMonthDay(d);\r\n        },\r\n        preYear(){\r\n            let d =  utils.getDate(this.time.year,this.time.month,1);\r\n            d.setYear(d.getFullYear()-1);\r\n            this.time = utils.getYearMonthDay(d);\r\n        },\r\n        nextYear(){\r\n            let d = utils.getDate(this.time.year,this.time.month,1);\r\n            d.setYear(d.getFullYear()+1);\r\n            this.time = utils.getYearMonthDay(d);\r\n        }\r\n    },\r\n    mounted(){\r\n        console.log(this.visibeDays()) \r\n    },\r\n    computed:{\r\n        formaDate(){\r\n            let {year,month,day} = utils.getYearMonthDay(this.value);\r\n            return `${year}-${month}-${day}`\r\n        }\r\n    },\r\n\r\n}\r\n</script>\r\n\r\n<style>\r\n    .pannel{\r\n        position: absolute;\r\n        background: #fff;\r\n        width: 60*7px;\r\n        box-shadow: 2px 2px 2px pink,-2px -2px 2px pink;\r\n        \r\n    }\r\n    .pannel-nav{\r\n        height: 60px;\r\n        display: flex;\r\n        justify-content: space-around;\r\n    }\r\n    .pannel-nav span{\r\n        display: inline-flex;\r\n        cursor: pointer;\r\n        user-select: none;\r\n\r\n        margin-left: 0px;\r\n        justify-content: center;\r\n        align-items: center;\r\n        \r\n    }\r\n    .pannel-nav span:hover{\r\n        border: 0.5px solid blue;\r\n        border-radius: 20%;\r\n        \r\n    }\r\n    .pannel-content .cell{\r\n        width: 64px;\r\n        height: 64px;\r\n        display: inline-flex;\r\n        /* align-content: center; */\r\n        justify-content: center;\r\n           align-items: center;\r\n        font-weight: bold;\r\n            border: 1px solid white;\r\n            border-radius: 10px;\r\n\r\n    }\r\n    .pannel-content .cell-days:hover,.select{\r\n        border: 1px solid pink;\r\n        justify-content: center;\r\n        align-items: center;\r\n        border-radius: 10px;\r\n    }\r\n    .pannel-footer .img{\r\n        height: 60px;\r\n    }\r\n    .notCurrentMonth{\r\n        color: gray;\r\n    }\r\n    .today{\r\n        background: red;\r\n        color: #fff;\r\n        border-radius: 10px;\r\n    }\r\n\r\n</style>"]}]}